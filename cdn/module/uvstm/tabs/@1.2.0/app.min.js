/* 
    UVSTM-tabs
    
    Version: uvstm-tabs @1.2.0
    Author: Mykhailo Unniiiverse (unniiiverse.github.io)
    License: MIT
*/
class UvstmTabs{constructor(){document.querySelectorAll('.uvstm-tabs-control_item').forEach((el,i)=>{el.setAttribute('id',`uvstm-tabs-controlID--${i}`);el.setAttribute('data-uvstm-tabs-trigger',`uvstm-tabs-contentID--${i}`);el.setAttribute('aria-controls',`uvstm-tabs-contentID--${i}`);el.setAttribute('aria-selected',!1)})
document.querySelectorAll('.uvstm-tabs-content_item').forEach((el,i)=>{el.setAttribute('id',`uvstm-tabs-contentID--${i}`);el.setAttribute('aria-labelledby',`uvstm-tabs-controlID--${i}`);el.setAttribute('aria-hidden',!0)})}
init(el,params={initTab:0,preventHeightJump:!1}){let{initTab,preventHeightJump}=params;let now;this.el=document.querySelector(el);const control=this.el.querySelector('.uvstm-tabs-control');const controlItems=control.querySelectorAll('.uvstm-tabs-control_item');const content=this.el.querySelector('.uvstm-tabs-content');const contentItems=content.querySelectorAll('.uvstm-tabs-content_item');const prev=document.querySelector('[data-uvstm-tabs-action="tab-prev"]');const next=document.querySelector('[data-uvstm-tabs-action="tab-next"]');controlItems[initTab].classList.add('uvstm-tabs-control_item--active');contentItems[initTab].classList.add('uvstm-tabs-content_item--active');controlItems[initTab].setAttribute('aria-selected',!0);contentItems[initTab].setAttribute('aria-hidden',!1);if(prev&&next){controlItems.forEach(el=>{if(el.classList.contains('uvstm-tabs-control_item--active')){now=el.getAttribute('id')}})
now=+now.split('--')[1];prev.addEventListener('click',e=>{if(now>0){return handler(e,now-=1)}})
next.addEventListener('click',e=>{if(now<contentItems.length-1){return handler(e,now+=1)}})}
if(preventHeightJump){let contentMaxHeight=0;contentItems.forEach(el=>{if(contentMaxHeight<el.offsetHeight){contentMaxHeight=el.offsetHeight}})
content.setAttribute('style',`height: ${contentMaxHeight}px;`)}
control.addEventListener('click',e=>{return handler(e,-1)})
control.addEventListener('keydown',e=>{if(e.code=='Enter'){return handler(e,-1)}})
function handler(e,tab){const self=e.target;let controlItem;let trigger;let contentItem;if(tab===-1){controlItem=self.closest('.uvstm-tabs-control_item');trigger=controlItem.getAttribute('data-uvstm-tabs-trigger');contentItem=document.querySelector(`#${trigger}`);now=+trigger.split('--')[1]}else{controlItem=controlItems[tab];contentItem=contentItems[tab]}
Array.from(control.children).forEach(el=>{el.classList.remove('uvstm-tabs-control_item--active');el.setAttribute('aria-selected',!1)})
Array.from(content.children).forEach(el=>{el.classList.remove('uvstm-tabs-content_item--active');el.setAttribute('aria-hidden',!0)})
controlItem.classList.add('uvstm-tabs-control_item--active');contentItem.classList.add('uvstm-tabs-content_item--active');controlItem.setAttribute('aria-selected',!0);contentItem.setAttribute('aria-hidden',!1);if(!preventHeightJump){content.setAttribute('style',`height: ${contentItem.offsetHeight}px;`)}}}}